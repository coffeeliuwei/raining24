# 扩展任务（供学生自行完成）

为进一步练习前后端开发与工程化，这里提供若干扩展任务。按由易到难的顺序组织，建议逐步完成并记录思路与遇到的问题。

## 一、前端扩展
- 学生搜索与分页
  - 目标：在学生列表支持关键字搜索（按姓名/电话）与分页显示。
  - 要求：在页面新增搜索框与分页控件；与后端接口联动（见后端扩展）。
  - 提示：可以用 `miniquery.js` 的 `$.ajax` 或 `LW.rest` 进行请求；模板渲染用 `$.renderList` 或自定义模板函数。

- 表单校验与错误提示
  - 目标：新增/选课表单提交前进行输入校验（非空、长度、格式）。
  - 要求：校验失败时阻止提交，并以醒目样式提示；成功后重置表单。
  - 提示：可封装 `showToast(message)` 提示函数或轻量弹窗。

- 统一消息提示组件
  - 目标：实现 `Toast` 或 `Alert` 组件，统一成功/失败提示。
  - 要求：支持自动消失、不同颜色样式；在所有提交成功/失败处使用。

- 交互优化
  - 目标：按钮加载态、禁用态；列表空状态占位；错误重试按钮。

## 二、后端扩展
- 学生搜索与分页接口
  - 目标：新增接口 `/api/students/search` 支持 `GET` 查询参数 `q`（关键字）、`page`、`size`。
  - 要求：`StudentService` 增加 `search(String q)` 与分页切片逻辑；`StudentController` 新增 `@Route` 并返回统一 `Json.ok`。
  - 提示：分页可用简单子列表切片；空/异常返回 `Json.error`。

- 学生信息更新与删除
  - 目标：新增接口 `/api/students/update`（`POST`）与 `/api/students/delete`（`POST`）。
  - 要求：更新按 `id` 修改对应对象；删除按 `id` 移除；返回修改后的对象或受影响条数。

- 选课取消
  - 目标：新增接口 `/api/enroll/cancel`（`POST`），支持取消学生对某课程的选课。
  - 要求：`EnrollService` 增加 `cancel(int studentId, String courseName)`。

- 课程更新与删除
  - 目标：新增接口 `/api/courses/update` 与 `/api/courses/delete`；支持按 `name` 或唯一标识操作。

- 导出 CSV
  - 目标：实现 `/api/export/students`（`GET`）返回 `text/csv` 的学生数据导出。
  - 要求：`HttpServerApp.StaticHandler.mimeType` 需要支持 `text/csv`（或直接在 Handler 中设置 `Content-Type`）。

- 简易登录鉴权
  - 目标：实现 `/api/login`（`POST`）返回会话令牌（可用内存 Map 存储）；接口需校验令牌。
  - 要求：在 `RequestContext` 中新增读取/写入 Cookie 或 Header 的辅助方法；为受保护接口添加校验逻辑。

## 三、进阶加分项
- 数据持久化
  - 目标：将内存数据持久化到本地文件（JSON/CSV）或嵌入式数据库（如 H2）。
  - 要求：提供 `load()` / `save()` 方法，服务启动时加载、关键变更时保存。

- 文件上传
  - 目标：新增页面与接口支持文件上传（如导入学生列表）。
  - 提示：可参考 `LWUploader` 的用法与事件回调；后端使用 `HttpExchange` 解析 `multipart/form-data`（可自定义简化版解析）。

- 统一异常与日志
  - 目标：统一异常捕获与错误返回；为后端添加简单日志拦截（请求路径、耗时）。

## 提交要求（建议）
- 每个任务至少包含：功能说明、接口文档、关键代码、演示截图。
- 所有新接口保持统一返回格式：`Json.ok(data)` 或 `Json.error(code, reason)`。
- 遵循现有代码风格与目录结构，避免不必要的重构。

## 扩展路线参考
1. 先完成“前端表单校验与统一提示”。
2. 再实现“学生搜索与分页”的前后端闭环。
3. 继续“更新/删除/取消选课”，补齐基本 CRUD。
4. 完成“导出 CSV”和“登录鉴权”。
5. 选择性挑战“持久化”和“文件上传”。

> 以上任务均可分阶段提交与演示，鼓励记录遇到的问题、设计取舍与优化思路。